<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="initial-scale=1, width=device-width" />

    <link rel="stylesheet" href="./global.css" />
    <link rel="stylesheet" href="./index.css" />

    <style>
      @font-face {
        font-family: "GemFont One";
        src: url("/GemFont One.ttf");
        font-weight: 400;
      }
      @font-face {
        font-family: "Augusta";
        src: url("/Augusta.ttf");
        font-weight: 400;
      }
    </style>
  </head>
  <body>
    <div class="welcome-screen">
      <!-- Launch Screen Video -->
      <div class="launch-screen" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 1000; background: black; display: flex; justify-content: center; align-items: center;">
        <video id="launch-video" style="width: 100%; height: 100%; object-fit: cover;" playsinline autoplay muted>
          <source src="public/battleship.webm" type="video/webm" onerror="this.parentElement.classList.add('hidden')">
        </video>
      </div>

      <style>
        .launch-screen.hidden {
          display: none !important;
        }
      </style>

      <!-- Audio elements -->
      <audio id="background-music" src="public/sound/sound.mp3" loop></audio>
      <audio id="click-sound" src="public/sound/click.mp3" preload="auto"></audio>
      <audio id="hover-sound" src="public/sound/hover.mp3" preload="auto"></audio>

    <div class="main-menu">
      <img class="bg-icon2" alt="" src="/bg@2x.png" />
      
      <!-- Volume Controls Panel -->
      <div class="volume-controls" style="display: none;">
        <div class="volume-control">
          <label>Music Volume</label>
          <input type="range" id="music-volume" min="0" max="100" value="50">
        </div>
        
        <div class="volume-control">
          <label>Sound Effects</label>
          <input type="range" id="effects-volume" min="0" max="100" value="50">
        </div>
      </div>
      

      <div class="title-buttons1">
        <img
          class="back-button-icon3"
          alt=""
          src="/back-button@2x.png"
        />

        <img
          class="settings-button-icon3"
          alt=""
          src="/settings-button@2x.png"
        />

        <img
          class="title-scroll"
          alt="Odyssey of Faith"
          src="/title-scroll@2x.png"
        />

        <div class="welcome">WELCOME</div>
      </div>

      <div class="start-button-container">
        <img
          class="start-button"
          alt="Start Game"
          src="/start-button.png"
          style="cursor: pointer;"
        />
      </div>

      <div class="menu-bar">
        <div class="profile-parent" data-page="profile-page.html">
          <div class="profile1">profile</div>
          <img class="user-icon" alt="" src="/user-icon@2x.png" />
        </div>
        <div class="shop-parent" data-page="shop-page.html">
          <div class="shop1">shop</div>
          <img class="user-icon" alt="" src="/shop-icon@2x.png" />
        </div>
        <div class="quest-icom-parent" data-page="quest-page.html">
          <img class="user-icon" alt="" src="/quest-icom@2x.png" />
          <div class="quests">quests</div>
        </div>
        <div class="leaderboard-parent" data-page="leaderboard.html">
          <div class="leaderboard">leaderboard</div>
          <img class="trophy-icon" alt="" src="/trophy-icon@2x.png" />
        </div>
      </div>
    </div>

    <script type="module">
      import { audioManager, navigateToScreen } from './main.js';
      
      // Add sound effects to all interactive elements
      function addSoundEffects() {
        const interactiveElements = [
          '.start-button',
          '.settings-button-icon3',
          '.back-button-icon3',
          '.menu-bar > div',
          'button',
          '[role="button"]'
        ];
        
        document.querySelectorAll(interactiveElements.join(', ')).forEach(element => {
          element.addEventListener('click', () => audioManager.playClickSound());
          element.addEventListener('mouseenter', () => audioManager.playHoverSound());
        });
      }
      
      document.addEventListener('DOMContentLoaded', () => {
        // Start background music on first interaction
        const launchScreen = document.querySelector('.launch-screen');
        const launchVideo = document.getElementById('launch-video');

        // Handle video loading error
        launchVideo.addEventListener('error', () => {
          launchScreen.classList.add('hidden');
        });

        // When video ends, fade out launch screen and show main menu
        launchVideo.addEventListener('ended', () => {
          launchScreen.style.transition = 'opacity 1s';
          launchScreen.style.opacity = '0';
          setTimeout(() => {
            launchScreen.classList.add('hidden');
            // Start background music after video ends
            audioManager.playBackgroundMusic();
          }, 1000);
        });

        // Fallback for background music if video fails to play
        launchVideo.addEventListener('error', () => audioManager.playBackgroundMusic());
        document.addEventListener('click', () => {
          audioManager.playBackgroundMusic();
        }, { once: true });

        // Handle start button click
        const startButton = document.querySelector('.start-button');
        startButton?.addEventListener('click', () => navigateToScreen('dialogue-page.html'));

        // Handle menu item clicks
        document.querySelectorAll('.menu-bar > div').forEach(menuItem => {
          menuItem.addEventListener('click', () => menuItem.dataset.page && navigateToScreen(menuItem.dataset.page));
        });
        
        addSoundEffects();
      });
    </script>
  </body>
</html>
